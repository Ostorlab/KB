<p>To implement anti-debugging techniques, use several of these techniques:</p>

<p><code>ptrace</code>: Use the <code>ptrace</code> system call with the
    <code>PT_DENY_ATTACH</code> flag to prevent debuggers from attaching to the process.
    The system call is not part of iOS public API and requires using the
    <code>dlsym</code> function to obtain a function pointer to call it.</p>

<pre><code class="language-c">
#import &lt;dlfcn.h&gt;
#import &lt;sys/types.h&gt;
#import &lt;stdio.h&gt;
typedef int (*ptrace_ptr_t)(int _request, pid_t _pid, caddr_t _addr, int _data);
void anti_debug() {
  ptrace_ptr_t ptrace_ptr = (ptrace_ptr_t)dlsym(RTLD_SELF, &quot;ptrace&quot;);
  ptrace_ptr(31, 0, 0, 0); // PTRACE_DENY_ATTACH = 31
}
</code></pre>

<p><code>sysctl</code>: The function can be used to retrieve information about the
current process, including determining if the application is being debugged.</p>
<pre><code class="language-c">
#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/sysctl.h&gt;

static bool AmIBeingDebugged(void)
    // Returns true if the current process is being debugged (either
    // running under the debugger or has a debugger attached post facto).
{
    int                 junk;
    int                 mib[4];
    struct kinfo_proc   info;
    size_t              size;

    // Initialize the flags so that, if sysctl fails for some bizarre
    // reason, we get a predictable result.

    info.kp_proc.p_flag = 0;

    // Initialize mib, which tells sysctl the info we want, in this case
    // we&#x27;re looking for information about a specific process ID.

    mib[0] = CTL_KERN;
    mib[1] = KERN_PROC;
    mib[2] = KERN_PROC_PID;
    mib[3] = getpid();

    // Call sysctl.

    size = sizeof(info);
    junk = sysctl(mib, sizeof(mib) / sizeof(*mib), &amp;info, &amp;size, NULL, 0);
    assert(junk == 0);

    // We&#x27;re being debugged if the P_TRACED flag is set.

    return ( (info.kp_proc.p_flag &amp; P_TRACED) != 0 );
}
</code>></pre>

<p><code>getppid</code>: iOS application can check the parent <code>PID</code>
to detect if the application has been started with a debugger.</p>
